(()=>{var e={582:e=>{"use strict";e.exports=require("cors")},860:e=>{"use strict";e.exports=require("express")},952:e=>{"use strict";e.exports=require("socket.io")},685:e=>{"use strict";e.exports=require("http")}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}(()=>{const e=s(860),t=s(582),{Server:o}=s(952),i=e(),n=s(685).Server(i);i.use(t());const r=s(952)(n,{cors:{origin:"http://localhost:5173"}}),c=[];let d="";r.on("connection",(e=>{e.on("inspector",(e=>{d=e})),e.on("refused",(t=>{const s=r.sockets.sockets.get(t.id);s?s.emit("refused client",t.motif):e.emit("nobody")})),e.on("potdevin",(e=>{const t=r.sockets.sockets.get(d);t&&t.emit("potdevin",e)})),e.on("accepted",(e=>{const t=r.sockets.sockets.get(e.id);t&&t.emit("accepted client")})),e.on("potdevin refused",(e=>{const t=r.sockets.sockets.get(e.id);t&&t.emit("potdevin refused")})),e.on("arrived",(t=>{const s={id:e.id,...t};c.find((t=>t.id===e.id))||(c.push(s),r.emit("nbClients",c.length),e.emit("position",c.length))})),e.on("disconnect",(()=>{})),e.on("next",(()=>{const e=r.sockets.sockets.get(d);if(e)if(c.length>0){const t=c.shift(),s=r.sockets.sockets.get(t.id);e.emit("nbClients",c.length),e.emit("new",t),r.emit("forward"),s&&s.emit("myturn")}else e.emit("new",null)}))})),n.listen(5e3,(()=>{console.log("listening")}))})()})();